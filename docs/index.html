<!DOCTYPE html>

<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Controle de Ve√≠culos</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
<style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7f9;
            color: #333;
            line-height: 1.6;
        }
        
        .login-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a73e8, #34a853, #fbbc05, #ea4335);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .login-container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 450px;
            padding: 30px;
            text-align: center;
        }
        
        .logo {
            font-size: 28px;
            font-weight: bold;
            color: #1a73e8;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .logo i {
            margin-right: 15px;
            font-size: 32px;
        }
        
        h2 {
            color: #1a73e8;
            margin-bottom: 25px;
            font-size: 24px;
        }
        
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #555;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: #1a73e8;
            outline: none;
            box-shadow: 0 0 0 2px rgba(26, 115, 232, 0.2);
        }
        
        .password-toggle {
            position: relative;
        }
        
        .password-toggle i {
            position: absolute;
            right: 15px;
            top: 14px;
            cursor: pointer;
            color: #777;
        }
        
        button {
            background: #1a73e8;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: background 0.3s;
            width: 100%;
            margin-top: 10px;
        }
        
        button:hover {
            background: #1557b0;
        }
        
        .notification {
            padding: 12px;
            margin: 15px 0;
            border-radius: 6px;
            display: none;
        }
        
        .success {
            background: #E6F4EA;
            color: #137333;
            border-left: 4px solid #137333;
        }
        
        .error {
            background: #FCE8E6;
            color: #C5221F;
            border-left: 4px solid #C5221F;
        }
        
        .support {
            margin-top: 20px;
            font-size: 14px;
            color: #5f6368;
        }
        
        .support a {
            color: #1a73e8;
            text-decoration: none;
        }
        
        .support a:hover {
            text-decoration: underline;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin-top: 20px;
            display: none;
        }
        
        header {
            background: #4285F4;
            color: white;
            padding: 20px;
            text-align: center;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .user-info button {
            width: auto;
            padding: 8px 15px;
            background: #ea4335;
        }
        
        .user-info button:hover {
            background: #d33426;
        }
        
        .tabs {
            display: flex;
            background: #f1f3f4;
            border-bottom: 1px solid #ddd;
        }
        
        .tab {
            padding: 15px 25px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            flex: 1;
            text-align: center;
        }
        
        .tab.active {
            border-bottom: 3px solid #4285F4;
            background: white;
            color: #4285F4;
        }
        
        .tab-content {
            display: none;
            padding: 25px;
            min-height: 500px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .card-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #4285F4;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        th {
            background-color: #f8f9fa;
            color: #555;
            font-weight: 600;
        }
        
        tr:hover {
            background-color: #f9f9f9;
        }
        
        .actions {
            display: flex;
            gap: 10px;
        }
        
        .btn-edit {
            background: #F4B400;
            padding: 8px 12px;
            font-size: 14px;
            width: auto;
        }
        
        .btn-delete {
            background: #DB4437;
            padding: 8px 12px;
            font-size: 14px;
            width: auto;
        }
        
        .btn-reserve {
            background: #9C27B0;
            padding: 8px 12px;
            font-size: 14px;
            width: auto;
        }
        
        .btn-cancel {
            background: #FF5722;
            padding: 8px 12px;
            font-size: 14px;
            width: auto;
        }
        
        .veiculo-status {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }
        
        .veiculo-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
            width: calc(50% - 20px);
            margin-bottom: 20px;
            position: relative;
        }
        
        .veiculo-disponivel {
            border-left: 4px solid #34A853;
        }
        
        .veiculo-em-uso {
            border-left: 4px solid #EA4335;
        }
        
        .veiculo-reserva {
            border-left: 4px solid #F9AB00;
        }
        
        .veiculo-reservado {
            border-left: 4px solid #9C27B0;
        }
        
        .status-badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 10px;
        }
        
        .disponivel {
            background: #E6F4EA;
            color: #137333;
        }
        
        .em-uso {
            background: #FCE8E6;
            color: #C5221F;
        }
        
        .reservado {
            background: #F3E5F5;
            color: #7B1FA2;
        }
        
        .reserva-alerta {
            background: #FEF7E0;
            color: #E37400;
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            font-weight: 500;
        }
        
        .cnh-alerta {
            background: #FFEBEE;
            color: #D32F2F;
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            font-weight: 500;
        }
        
        .admin-only {
            display: none;
        }
        
        .authenticated .admin-only {
            display: block;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: #777;
            font-size: 14px;
            margin-top: 30px;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .checkbox-group input {
            width: auto;
            margin-right: 10px;
        }
        
        .datetime-group {
            display: flex;
            gap: 15px;
        }
        
        .datetime-group .form-group {
            flex: 1;
        }
        
        .password-display {
            font-family: monospace;
            background-color: #f5f5f5;
            padding: 4px 8px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        
        .admin-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 25px;
            text-align: left;
            border-left: 4px solid #1a73e8;
        }
        
        .admin-info h3 {
            color: #1a73e8;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .admin-info p {
            margin-bottom: 8px;
            color: #555;
            font-size: 14px;
        }
        
        .veiculo-info {
            margin-top: 10px;
        }
        
        .veiculo-info p {
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        .veiculo-info strong {
            color: #555;
        }
        
        .historico-actions {
            margin-top: 20px;
            display: flex;
            justify-content: flex-end;
        }
        
        .ultima-km {
            background-color: #f0f7ff;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #1a73e8;
        }
        
        .ultima-km p {
            margin: 5px 0;
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }
            
            .container {
                border-radius: 0;
                margin-top: 0;
            }
            
            .veiculo-card {
                width: 100%;
            }
            
            .datetime-group {
                flex-direction: column;
                gap: 0;
            }
            
            .actions {
                flex-direction: column;
                gap: 5px;
            }
            
            .historico-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body><div id="login-section"><input id="inputNomeLogin" placeholder="Nome do motorista" type="text"/><input id="inputSenhaLogin" placeholder="Senha" type="password"/><button id="btnLogin" onclick="realizarLogin()">Entrar</button></div>
<!-- Tela de Login -->
<div class="login-screen" id="loginScreen">
<div class="login-container">
<div class="logo">
<i class="fas fa-car"></i>
                Controle de Ve√≠culos
            </div>
<h2>Acesso Restrito</h2>
<div id="notificationArea"></div>
<form id="loginForm">
<div class="form-group">
<label for="password">Senha de Acesso</label>
<div class="password-toggle">
<input id="password" placeholder="Digite sua senha" required="" type="password"/>
<i class="fas fa-eye" id="togglePassword"></i>
</div>
</div>
<button type="submit"><i class="fas fa-sign-in-alt"></i> Acessar Sistema</button>
</form>
<div class="support">
<p>Problemas de acesso? <a href="#" id="contactAdmin">Contate o administrador</a></p>
</div>
</div>
</div>
<!-- Sistema Principal (inicialmente oculto) -->
<div class="container" id="mainSystem">
<header>
<div class="logo">
<i class="fas fa-car"></i>
                Controle de Ve√≠culos
            </div>
<div class="user-info">
<span id="userName">Usu√°rio</span>
<button id="btnLogoutUser"><i class="fas fa-sign-out-alt"></i> Sair</button>
</div>
</header>
<div class="tabs">
<div class="tab active" data-tab="status">Status dos Ve√≠culos</div>
<div class="tab" data-tab="retirada">Registrar Retirada</div>
<div class="tab" data-tab="reserva">Reservar Ve√≠culo</div>
<div class="tab" data-tab="devolucao">Registrar Devolu√ß√£o</div>
<div class="tab" data-tab="historico">Hist√≥rico</div>
<div class="tab" data-tab="administracao">Administra√ß√£o</div>
</div>
<div class="tab-content active" id="status">
<h2><i class="fas fa-car"></i> Status dos Ve√≠culos</h2>
<p>Veja abaixo a situa√ß√£o atual dos ve√≠culos da empresa:</p>
<div class="veiculo-status" id="lista-veiculos">
<!-- Os ve√≠culos ser√£o carregados dinamicamente -->
</div>
</div>
<div class="tab-content" id="retirada">
<h2><i class="fas fa-key"></i> Registrar Retirada</h2>
<div class="card">
<div class="card-title">Registrar Nova Retirada</div>
<div class="ultima-km" id="infoUltimaKm" style="display: none;">
<p><strong>√öltima Quilometragem Registrada:</strong> <span id="valorUltimaKm">0</span> km</p>
<p><strong>Data do √öximo Registro:</strong> <span id="dataUltimaKm">-</span></p>
</div>
<form id="formRetirada">
<div class="form-group">
<label for="veiculoRetirada">Ve√≠culo</label>
<select id="veiculoRetirada" required="">
<option value="">Selecione um ve√≠culo</option>
</select>
</div>
<div class="form-group">
<label for="motoristaRetirada">Motorista</label>
<select id="motoristaRetirada" required="">
<option value="">Selecione um motorista</option>
</select>
</div>
<div class="form-group">
<label for="kmRetirada">Quilometragem Atual</label>
<input id="kmRetirada" placeholder="Km atual" required="" type="number"/>
</div>
<div class="form-group">
<label for="combustivelRetirada">N√≠vel de Combust√≠vel na Retirada</label>
<select id="combustivelRetirada" required="">
<option value="">Selecione o n√≠vel</option>
<option value="Reserva">Reserva</option>
<option value="1/4">1/4</option>
<option value="1/2">1/2</option>
<option value="3/4">3/4</option>
<option value="Cheio">Cheio</option>
</select>
</div>
<div class="form-group">
<label for="destino">Destino</label>
<input id="destino" placeholder="Destino da viagem" required="" type="text"/>
</div>
<div class="reserva-alerta" id="alertaReservaRetirada" style="display: none;">
<i class="fas fa-exclamation-triangle"></i> Ve√≠culo na reserva, favor abastecer!
                    </div>
<div class="cnh-alerta" id="alertaCnhRetirada" style="display: none;">
<i class="fas fa-exclamation-circle"></i> ATEN√á√ÉO: CNH vencida! N√£o √© poss√≠vel retirar ve√≠culo.
                    </div>
<button id="btnRegistrarRetirada" type="submit"><i class="fas fa-check-circle"></i> Registrar Retirada</button>
</form>
</div>
</div>
<div class="tab-content" id="reserva">
<h2><i class="fas fa-calendar-check"></i> Reservar Ve√≠culo</h2>
<div class="card">
<div class="card-title">Fazer Reserva de Ve√≠culo</div>
<form id="formReserva">
<div class="form-group">
<label for="veiculoReserva">Ve√≠culo</label>
<select id="veiculoReserva" required="">
<option value="">Selecione um ve√≠culo</option>
</select>
</div>
<div class="form-group">
<label for="motoristaReserva">Motorista</label>
<select id="motoristaReserva" required="">
<option value="">Selecione um motorista</option>
</select>
</div>
<div class="datetime-group">
<div class="form-group">
<label for="dataInicioReserva">Data de In√≠cio</label>
<input id="dataInicioReserva" required="" type="date"/>
</div>
<div class="form-group">
<label for="horaInicioReserva">Hora de In√≠cio</label>
<input id="horaInicioReserva" required="" type="time"/>
</div>
</div>
<div class="datetime-group">
<div class="form-group">
<label for="dataFimReserva">Data de T√©rmino</label>
<input id="dataFimReserva" required="" type="date"/>
</div>
<div class="form-group">
<label for="horaFimReserva">Hora de T√©rmino</label>
<input id="horaFimReserva" required="" type="time"/>
</div>
</div>
<div class="form-group">
<label for="destinoReserva">Destino</label>
<input id="destinoReserva" placeholder="Destino da viagem" required="" type="text"/>
</div>
<div class="cnh-alerta" id="alertaCnhReserva" style="display: none;">
<i class="fas fa-exclamation-circle"></i> ATEN√á√ÉO: CNH vencida! N√£o √© poss√≠vel reservar ve√≠culo.
                    </div>
<div class="reserva-alerta" id="alertaPermissaoReserva" style="display: none;">
<i class="fas fa-exclamation-triangle"></i> Esta pessoa n√£o tem permiss√£o para reservar ve√≠culos.
                    </div>
<button id="btnRegistrarReserva" type="submit"><i class="fas fa-calendar-check"></i> Reservar Ve√≠culo</button>
</form>
</div>
</div>
<div class="tab-content" id="devolucao">
<h2><i class="fas fa-undo"></i> Registrar Devolu√ß√£o</h2>
<div class="card">
<div class="card-title">Registrar Devolu√ß√£o</div>
<form id="formDevolucao">
<div class="form-group">
<label for="veiculoDevolucao">Ve√≠culo</label>
<select id="veiculoDevolucao" required="">
<option value="">Selecione um ve√≠culo</option>
</select>
</div>
<div class="form-group">
<label for="kmDevolucao">Quilometragem Atual</label>
<input id="kmDevolucao" placeholder="Km atual" required="" type="number"/>
</div>
<div class="form-group">
<label for="combustivelDevolucao">N√≠vel de Combust√≠vel na Devolu√ß√£o</label>
<select id="combustivelDevolucao" required="">
<option value="">Selecione o n√≠vel</option>
<option value="Reserva">Reserva</option>
<option value="1/4">1/4</option>
<option value="1/2">1/2</option>
<option value="3/4">3/4</option>
<option value="Cheio">Cheio</option>
</select>
</div>
<div class="form-group">
<label for="observacoes">Observa√ß√µes</label>
<textarea id="observacoes" placeholder="Observa√ß√µes sobre o ve√≠culo" rows="3"></textarea>
</div>
<button type="submit"><i class="fas fa-check-circle"></i> Registrar Devolu√ß√£o</button>
</form>
</div>
</div>
<div class="tab-content" id="historico">
<h2><i class="fas fa-history"></i> Hist√≥rico</h2>
<div class="card">
<div class="card-title">Hist√≥rico de Movimenta√ß√µes</div>
<div class="historico-actions">
<button id="btnLimparHistorico" style="width: auto; background: #EA4335;">
<i class="fas fa-trash"></i> Limpar Hist√≥rico Antigo
                    </button>
</div>
<table id="tabelaHistorico">
<thead>
<tr>
<th>Data/Hora</th>
<th>Ve√≠culo</th>
<th>Motorista</th>
<th>Km Retirada</th>
<th>Combust√≠vel Retirada</th>
<th>Km Devolu√ß√£o</th>
<th>Combust√≠vel Devolu√ß√£o</th>
<th>Destino</th>
<th>Observa√ß√µes</th>
<th>A√ß√µes</th>
</tr>
</thead>
<tbody>
<!-- O hist√≥rico ser√° carregado dinamicamente -->
</tbody>
</table>
</div>
</div>
<div class="tab-content" id="administracao">
<h2><i class="fas fa-lock"></i> √Årea de Administra√ß√£o</h2>
<div class="card">
<div class="card-title">Acesso Restrito</div>
<p>Esta √°rea √© restrita aos administradores do sistema.</p>
<div class="admin-access">
<i class="fas fa-lock" style="font-size: 48px; color: #F44336; margin-bottom: 15px;"></i>
<h3>Acesso Administrativo</h3>
<p>Para acessar as fun√ß√µes administrativas, digite a senha de administra√ß√£o:</p>
<div class="form-group">
<div class="password-toggle">
<input id="senhaAdmin" placeholder="Digite a senha de administra√ß√£o" type="password"/>
<i class="fas fa-eye" id="toggleAdminPassword"></i>
</div>
</div>
<button id="btnAcessarAdmin"><i class="fas fa-unlock"></i> Acessar √Årea Admin</button>
</div>
<div id="conteudoAdmin" style="display: none; margin-top: 30px;">
<div class="card">
<div class="card-title">Gerenciar Ve√≠culos</div>
<form id="formVeiculo">
<input id="veiculoId" type="hidden"/>
<div class="form-group">
<label for="modeloVeiculo">Modelo do Ve√≠culo</label>
<input id="modeloVeiculo" placeholder="Ex: Fiat Uno" required="" type="text"/>
</div>
<div class="form-group">
<label for="placaVeiculo">Placa</label>
<input id="placaVeiculo" placeholder="Ex: ABC-1234" required="" type="text"/>
</div>
<div class="form-group">
<label for="corVeiculo">Cor</label>
<input id="corVeiculo" placeholder="Ex: Prata" required="" type="text"/>
</div>
<div class="form-group">
<label for="ultimaKmVeiculo">√öltima Quilometragem</label>
<input id="ultimaKmVeiculo" placeholder="√öltima km registrada" type="number"/>
</div>
<div class="form-group">
<label for="statusVeiculo">Status</label>
<select id="statusVeiculo" required="">
<option value="Dispon√≠vel">Dispon√≠vel</option>
<option value="Em uso">Em uso</option>
<option value="Reservado">Reservado</option>
<option value="Em Manuten√ß√£o">Em Manuten√ß√£o</option>
</select>
</div>
<button type="submit"><i class="fas fa-save"></i> Salvar Ve√≠culo</button>
<button id="btnCancelarVeiculo" style="background: #777;" type="button"><i class="fas fa-times"></i> Cancelar</button>
</form>
<div style="margin-top: 20px;">
<h3>Ve√≠culos Cadastrados</h3>
<table id="tabelaVeiculos">
<thead>
<tr>
<th>Modelo</th>
<th>Placa</th>
<th>Cor</th>
<th>√öltima KM</th>
<th>Status</th>
<th>A√ß√µes</th>
</tr>
</thead>
<tbody>
<!-- Os ve√≠culos ser√£o carregados dinamicamente -->
</tbody>
</table>
</div>
</div>
<div class="card">
<div class="card-title">Gerenciar Motoristas</div>
<form id="formMotorista">
<input id="motoristaId" type="hidden"/>
<div class="form-group">
<label for="nomeMotorista">Nome do Motorista</label>
<input id="nomeMotorista" placeholder="Nome completo" required="" type="text"/>
</div>
<div class="form-group">
<label for="telefoneMotorista">Telefone</label>
<input id="telefoneMotorista" placeholder="(11) 99999-9999" required="" type="text"/>
</div>
<div class="form-group">
<label for="senhaMotorista">Senha</label>
<input id="senhaMotorista" placeholder="Senha para login" required="" type="password"/>
</div>
<div class="form-group">
<label for="cnhMotorista">N√∫mero da CNH</label>
<input id="cnhMotorista" placeholder="N√∫mero da CNH" required="" type="text"/>
</div>
<div class="form-group">
<label for="validadeCnh">Validade da CNH</label>
<input id="validadeCnh" required="" type="date"/>
</div>
<div class="form-group">
<label for="categoriaCnh">Categoria da CNH</label>
<select id="categoriaCnh" required="">
<option value="A">A</option>
<option value="B">B</option>
<option value="C">C</option>
<option value="D">D</option>
<option value="E">E</option>
</select>
</div>
<div class="checkbox-group">
<input id="permiteReserva" type="checkbox"/>
<label for="permiteReserva">Permitir reservar ve√≠culos</label>
</div>
<button type="submit"><i class="fas fa-save"></i> Salvar Motorista</button>
<button id="btnCancelarMotorista" style="background: #777;" type="button"><i class="fas fa-times"></i> Cancelar</button>
</form>
<div style="margin-top: 20px;">
<h3>Motoristas Cadastrados</h3>
<table id="tabelaMotoristas">
<thead>
<tr>
<th>Nome</th>
<th>Telefone</th>
<th>CNH</th>
<th>Validade</th>
<th>Categoria</th>
<th>Pode Reservar</th>
<th>A√ß√µes</th>
</tr>
</thead>
<tbody>
<!-- Os motoristas ser√£o carregados dinamicamente -->
</tbody>
</table>
</div>
</div>
<div class="card">
<div class="card-title">Reservas Ativas</div>
<div style="margin-top: 20px;">
<h3>Reservas em Andamento</h3>
<table id="tabelaReservas">
<thead>
<tr>
<th>Ve√≠culo</th>
<th>Motorista</th>
<th>Data In√≠cio</th>
<th>Data Fim</th>
<th>Destino</th>
<th>A√ß√µes</th>
</tr>
</thead>
<tbody>
<!-- As reservas ser√£o carregadas dinamicamente -->
</tbody>
</table>
</div>
</div>
<div class="card">
<div class="card-title">Configura√ß√µes do Sistema</div>
<div class="form-group">
<label for="senhaPadrao">Nova Senha Padr√£o</label>
<input id="senhaPadrao" placeholder="Deixe em branco para n√£o alterar" type="password"/>
</div>
<div class="form-group">
<label for="confirmarSenha">Confirmar Nova Senha</label>
<input id="confirmarSenha" placeholder="Confirme a nova senha" type="password"/>
</div>
<button id="btnAlterarSenha"><i class="fas fa-key"></i> Alterar Senha Padr√£o</button>
<div style="margin-top: 20px;">
<h3>Limpar Dados</h3>
<p>Esta a√ß√£o ir√° remover todos os hist√≥ricos e registros do sistema. Use com cautela!</p>
<button id="btnLimparDados" style="background: #EA4335;"><i class="fas fa-trash"></i> Limpar Todos os Dados</button>
</div>
</div>
</div>
</div>
</div>
<footer>
<p>Sistema de Controle de Ve√≠culos Polimeros 1.6 ¬© 2025 - Desenvolvido para facilitar o gerenciamento de frotas</p>
</footer>
</div>



<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
  import { getDatabase, ref, onValue, push, set, update, remove } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyANtVoKUjocbqVOyrdQptlTs62RGOoNUN0",
    authDomain: "carrosfrota-a58e5.firebaseapp.com",
    databaseURL: "https://carrosfrota-a58e5-default-rtdb.firebaseio.com",
    projectId: "carrosfrota-a58e5",
    storageBucket: "carrosfrota-a58e5.firebasestorage.app",
    messagingSenderId: "107456511174",
    appId: "1:107456511174:web:220b3bc227cb450d6eebc7"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  // Exemplo: carregar motoristas
  const selectMotoristas = document.querySelectorAll("select[name='motorista']");
  onValue(ref(db, 'motoristas'), (snapshot) => {
    const data = snapshot.val();
    selectMotoristas.forEach(select => {
      select.innerHTML = '';
      for (const id in data) {
        const m = data[id];
        const option = document.createElement('option');
        option.value = id;
        option.textContent = m.nome;
        select.appendChild(option);
      }
    });
  });

  // Exemplo: carregar ve√≠culos
  const selectVeiculos = document.querySelectorAll("select[name='veiculo']");
  onValue(ref(db, 'veiculos'), (snapshot) => {
    const data = snapshot.val();
    selectVeiculos.forEach(select => {
      select.innerHTML = '';
      for (const id in data) {
        const v = data[id];
        const option = document.createElement('option');
        option.value = id;
        option.textContent = `${v.modelo} - ${v.placa}`;
        select.appendChild(option);
      }
    });
  });

  // Exemplo: salvar retirada
  document.getElementById("btnRegistrarRetirada")?.addEventListener("click", () => {
    const retirada = {
      dataHora: new Date().toISOString(),
      veiculoId: document.getElementById("veiculoRetirada")?.value,
      motoristaId: document.getElementById("motoristaRetirada")?.value,
      kmRetirada: document.getElementById("kmRetirada")?.value,
      combustivelRetirada: document.getElementById("combustivelRetirada")?.value,
      destino: document.getElementById("destino")?.value
    };
    const novaRef = push(ref(db, 'retiradas'));
    set(novaRef, retirada);
    alert("Retirada registrada com sucesso!");
  });

  // Exemplo: salvar reserva
  document.getElementById("btnRegistrarReserva")?.addEventListener("click", () => {
    const reserva = {
      veiculoId: document.getElementById("veiculoReserva")?.value,
      motoristaId: document.getElementById("motoristaReserva")?.value,
      dataInicio: document.getElementById("dataInicioReserva")?.value,
      horaInicio: document.getElementById("horaInicioReserva")?.value,
      dataFim: document.getElementById("dataFimReserva")?.value,
      horaFim: document.getElementById("horaFimReserva")?.value,
      destino: document.getElementById("destinoReserva")?.value
    };
    const novaRef = push(ref(db, 'reservas'));
    set(novaRef, reserva);
    alert("Reserva registrada com sucesso!");
  });

  // Exemplo: salvar devolu√ß√£o
  document.getElementById("formDevolucao")?.addEventListener("submit", (e) => {
    e.preventDefault();
    const devolucao = {
      veiculoId: document.getElementById("veiculoDevolucao")?.value,
      kmDevolucao: document.getElementById("kmDevolucao")?.value,
      combustivelDevolucao: document.getElementById("combustivelDevolucao")?.value,
      observacoes: document.getElementById("observacoes")?.value
    };
    const novaRef = push(ref(db, 'devolucoes'));
    set(novaRef, devolucao);
    alert("Devolu√ß√£o registrada com sucesso!");
  });

  // Exemplo: carregar hist√≥rico
  const tabela = document.getElementById("tabelaHistorico")?.querySelector("tbody");
  onValue(ref(db, 'historico'), (snapshot) => {
    const data = snapshot.val();
    if (tabela) {
      tabela.innerHTML = '';
      for (const id in data) {
        const h = data[id];
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${h.dataHora}</td>
          <td>${h.veiculo}</td>
          <td>${h.motorista}</td>
          <td>${h.kmRetirada}</td>
          <td>${h.combustivelRetirada}</td>
          <td>${h.kmDevolucao}</td>
          <td>${h.combustivelDevolucao}</td>
          <td>${h.destino}</td>
          <td>${h.observacoes}</td>
          <td><button onclick="removerHistorico('${id}')">Excluir</button></td>
        `;
        tabela.appendChild(row);
      }
    }
  });

  window.removerHistorico = function(id) {
    remove(ref(db, `historico/${id}`));
    alert("Hist√≥rico removido.");
  };
</script>

</body>
</html>
